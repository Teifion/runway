<div metal:use-macro="pre_content">
  <div metal:fill-slot="sidebar_logo">
    Wordy
  </div>
  
  <ol class="breadcrumb" metal:fill-slot="breadcrumbs">
    <li><a href="${request.route_url('/')}">${request.runway_settings.system['name']}</a></li>
    <li><a href="${request.route_url('wordy.home')}">Wordy</a></li>
    <li class="active">Stats</li>
  </ol>
  
  <ul metal:fill-slot="navbar_button" class="navbar-buttons">
    <li>
      <a href="${request.route_url('wordy.home')}" class="btn btn-default btn-sm">Wordy Menu</a>
    </li>
    <li>
      <a href="${request.route_url('wordy.preferences')}" class="btn btn-default btn-sm">Wordy Preferences</a>
    </li>
    <li>
      <a href="${request.route_url('wordy.stats')}" class="btn btn-default btn-sm disabled">Wordy Stats</a>
    </li>
  </ul>
  
  <div metal:fill-slot="content">
    <script type="text/javascript" charset="utf-8">
      $(function() {
        $('#sidebar_wordy').addClass('menu-active');
        $('#sidebar_wordy a').addClass('icon-active');
      });
    </script>
    
    <div class="row first-row">
      <div class="col-sm-12 col-md-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <!-- <i class="fa fa-check-circle fa-fw"></i> -->
            Stats
          </div>
          
          <div class="panel-body">
            <div style="font-size:1.3em;margin-bottom:20px;">Win ratio: ${stats['win_ratio']}%</div>
          
            <table class="table table-striped">
              <tbody>
                <tr>
                  <td><strong>Games played:</strong></td>
                  <td>${stats['completed_games'] + stats['games_in_progress']}</td>
                  
                  <td width="75">&nbsp;</td>
                  
                  <td><strong>Games won:</strong></td>
                  <td>${stats['games_won']}</td>
                </tr>
                <tr>
                  <td><strong>Completed games:</strong></td>
                  <td>${stats['completed_games']}</td>
                  
                  <td width="75">&nbsp;</td>
                  
                  <td><strong>Games lost:</strong></td>
                  <td>${stats['games_lost']}</td>
                </tr>
                <tr>
                  <td><strong>Games in progress:</strong></td>
                  <td>${stats['games_in_progress']}</td>
                  
                  <td width="75">&nbsp;</td>
                  
                  <td><strong>Games drawn:</strong></td>
                  <td>${stats['games_drawn']}</td>
                </tr>
              </tbody>
            </table>
            
          </div>
        </div>
      </div>
      
      <div class="col-sm-12 col-md-6 col-lg-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <!-- <i class="fa fa-check-circle fa-fw"></i> -->
            Stats
          </div>
          
          <div class="panel-body">
            <!-- Head to Head -->
            <script type="text/javascript" charset="utf-8" tal:condition="stats != None">
              $(document).ready(function() {
                $('#opponent').focus();
              });
              
              function get_head_to_head ()
              {
                // Load the drilldown
                $('#head_to_head_results').load(
                    '${request.route_url('wordy.head_to_head_stats')}',
                    {
                        'player':${request.user.id},
                        'opponent_name':$('#opponent').val()
                    });
                $('#opponent').focus();
                $('#opponent').select();
              }
            </script>
            
            <form method="post" accept-charset="utf-8" onsubmit="get_head_to_head(); return false;" class="form-horizontal">
              Enter opponent name for head to head stats:
              <br /><br />
              <div class="form-group">
                <label for="control_id" class="col-sm-4 control-label">Opponent name:</label>
                <div class="col-sm-4">
                  <input type="text" name="opponent" id="opponent" value="" style="display:inline-block;"/>
                </div>
              </div>
              <input type="submit" value="Load" name="form.submitted" class="btn btn-primary pull-right" />
              
            </form>
            
            <div id="head_to_head_results">
                &nbsp;
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- <div metal:fill-slot="footer">
        Open source - <a href="http://github.com/teifion/wordy2">http://github.com/teifion/wordy2</a>
    </div> -->
  </div>
</div>